<div id="cookie-banner" style="position:fixed;right:16px;left:16px;bottom:16px;background:#fff;color:#111;border:1px solid #ddd;padding:12px 16px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.08);z-index:9999;display:flex;align-items:center;gap:12px;font-family:inherit;">
  <div style="flex:1;min-width:0;font-size:14px;line-height:1.4;">
    This site uses cookies for analytics. By clicking "Accept" you agree to the use of analytics cookies.
    See our <a href="{{ '/privacy/' | relative_url }}">Privacy Policy</a> for details.
  </div>
  <div style="display:flex;gap:8px;align-items:center;">
    <button id="cookie-accept" style="background:rgb(5, 221, 124); border:0;color:#fff;padding:8px 12px;border-radius:6px;cursor:pointer;">Accept</button>
    <button id="cookie-deny" style="background:#eee;border:0;color:#333;padding:8px 12px;border-radius:6px;cursor:pointer;">Decline</button>
  </div>
</div>

<script>
  (function(){
    function hideBanner(){
      var b = document.getElementById('cookie-banner');
      if (b) b.style.display = 'none';
    }

    function setCookie(name, value, days){
      var d = new Date();
      d.setTime(d.getTime() + (days*24*60*60*1000));
      document.cookie = name + '=' + value + '; path=/; expires=' + d.toUTCString() + '; SameSite=Lax';
    }

    function getCookie(name){
      var v = document.cookie.split(';').map(c=>c.trim()).find(c=>c.indexOf(name+'=')===0);
      return v ? v.split('=')[1] : null;
    }

    var consent = getCookie('cookie_consent');
    if (consent && consent.indexOf('analytics=granted') !== -1){
      hideBanner();
      if (window.enableAnalytics) window.enableAnalytics();
      return;
    }
    if (consent && consent.indexOf('analytics=denied') !== -1){
      hideBanner();
      if (window.disableAnalytics) window.disableAnalytics();
      return;
    }

    document.getElementById('cookie-accept').addEventListener('click', function(){
      setCookie('cookie_consent', 'analytics=granted', 365);
      if (window.enableAnalytics) window.enableAnalytics();
      hideBanner();
    });

    document.getElementById('cookie-deny').addEventListener('click', function(){
      setCookie('cookie_consent', 'analytics=denied', 365);
      if (window.disableAnalytics) window.disableAnalytics();
      hideBanner();
    });
  })();
</script>
